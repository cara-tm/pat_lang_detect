h1. pat_lang_detect

Textpattern CMS plugin: Simple browser vistor preference language detection for redirect and other utilities.

This plugin intents to help for multi languages websites support. Detects the language preference of the visitors browser, then redirect to the corresponding page named by the two matching letters (eg. @en@) if it exists.

h3. Usage

Place this tag into your @default@ page template but nothing other else:

* @<txp:pat_lang_detect redirect="1" />@

And... _VoilÃ !_

So, create multilingual websites is as simple as to write articles attached to each locale sections. ðŸ˜‰

*Note*: You need to put your home page template translated into each pages associated with a locale code (ISO2). For no redirect, "keeping as this your 'Default' page, see below":#about-redirection.

h4. Attribute

* @redirect@ (boolean): set to @true@ (i.e. @1@) if you want a redirection to the corresponding locale page; set to @false@ (i.e. @0@) if you want only the URL (maybe for a link creation). Default "@0@" (@false@).
* @display@ (boolean): set to true (i.e. @1@) returns link URL. Default @false@ (do not returns anything).

h3. TXP variable

The plugin also creates a TXP variable named @<txp:variable name="visitor_lang" />@ which contains the locale code country (ISO2) of your visitors and available for any conveniences throught your entire website.

h3. About redirection

Redirections can be a problem and/or identified as a bad practice by performance tools but without any *noticed* SEO impacts (on Google search engine). The default "@redirect@" attribute is set to "@false@" for this reason and you could prefer to display a simple locale message for your visitors instead:

bq. &lt;txp:pat_lang_detect /&gt;
&lt;txp:if_variable name="visitor_lang" value="en"&gt;
    &lt;p&gt;This website is also available in your language: &lt;a rel="alternate" href="&lt;txp:pat_lang_detect display="1" /&gt;"&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;/txp:if_variable&gt;

For further infos, "see here too":https://github.com/cara-tm/pat_text#advice.

h3. pat_lang_meta_href

This tag, without any attributes, is dedicated to your @<head>@ document part in order to add the alternate links to each locale pages of your website. This practice intents to get good spots for your SEO efforts.

e.g.

bq. &lt;link rel="alternate" hreflang="x-default" href="http&#8202;://example.com/en"&gt;
&lt;link rel="alternate" hreflang="fr" href="http&#8202;://example.com/fr"&gt;

Note: @x-default@ value if a section is found same as the website default active language sets in the languages prÃ©fÃ©rences. Best place to add in your "Default" page template. Just because this plugin can't find all corresponding translated sections of your website. Nevermind, Google will understand your website structure from your home page. -If you want a in deep SEO organisation, you will need to create a conditional individual article loop maybe with the help of a @custom_field@ to store the @#ID@ identifer of the corresponding translated article in order to generate manualy an alternate href link-. Version 0.1.2. introduices a way, see below.

In your *inner pages* (others than the _home_ one), best use is to wrap the plugin tag with if_individual_article:

bq. &lt;txp:if_individual_article&gt;&lt;txp:pat_lang_meta_href /&gt;&lt;/txp:if_individual_article&gt;

h2. Custom field

For individual alternate href links, use a custom field named @Twin_ID@ to store the ID of the corresponding translated article. The alternate links will be generated automaticaly in an individual article context.
 
h3. Histoy and Changelog

Plugin created for the "FOTO" prenium TXP theme.

* 12 ^th^ November 2017. v 0.1.3. & v 0.1.4.
* 11 ^th^ November 2017. v 0.1.2.
* 8 ^th^ November 2017. v 0.1.0. & 0.1.1.
